internal_name: Monster Lobby

contains:
  shrooms: 5
  cards: 1
  eggs: 1

areas:
  Start:
    area_connections:
      Jester Boots Platform:
        or:
          - event: Armada Lobby Pipes Risen
          - ability: Hover
          - ability: Double Jump
          - comment: Ejection launch from cannon wheel
            and:
            - tech: ejection_launch
            - ability: Roll

      Cannon Entrance:
        comment: Early Armada
        movement: 2
      
      Cannon:
        or:
          - template: super_jumps

          - and:
            - event: Armada Lobby Red Pipe Updraft
            - event: Armada Lobby Pipes Risen
            - ability: Hover

          - and:
            - ability: Double Jump
            - or:
              - ability: Dive
              - ability: High Jump
              - ability: Hover
              - and:
                - tech: tail_jump
                - or:
                  - ability: Grounded Attack
                  - and:
                    - movement: 2
                    - ability: Aerial Attack

      Flag Platform:
        or:
          - tech: super_bounce
          - tech: bubble_jump

          - ability: Double Jump
          - ability: Dive
          - ability: Grounded Attack

          - and:
            - ability: Aerial Attack
            - ability: High Jump

          - comment: >
              Hover shoot onto and from the entrance pipe
            and:
            - movement: 2
            - ability: Hover
            - ability: Bubble

    entrances:
      Sun Cavern Door:
        lose:
          - Jester Boots
        to:
          - Sun Cavern
          - Armada Lobby Door

    locations:
      shrooms:
        Cliffside:
          count: 5

      cards:
        Jester Boots:
          or:
            - ability: Flight
            - event: (internal) AAL Jester Boots Access

      events:
        Armada Lobby Purple Valve:
          whackable:
            - attack
            - roll

        Armada Lobby Green Valve:
          whackable:
            - attack
            - roll

  Flag Platform:
    area_connections:
      Start: null
      Sewer Connector Entrance:
        ability: Swim

  Jester Boots Platform:
    area_connections:
      Start:
        # death warp lol
        null
        
      Jester Boots:
        whackable:
          - attack
          - roll
          - throw
            
  Jester Boots:
    area_connections:
      Jester Boots Platform:
        null

    locations:
      carryables:
        - Jester Boots

  Cannon:
    area_connections:
      Cannon Entrance: null
      Start: null
      Egg Platform:
        or:
          - carrying: Jester Boots
          - template: super_jumps

          - comment: >
              Hover jump towards the pipe, enable double-jump, then jump onto
              the pipe. Perform the same trick from the pipe to the ledge
            and:
            - tech: ability_toggle
            - tech: hover_jump
            - ability: Hover
            - ability: Double Jump
          
          - comment: >
              Double jump and hover-shoot to the pipe, then do the same to the
              platform
            and:
              - tech: hover_shoot
              - tech: hover_jump
              - ability: Double Jump
              - ability: Hover
              - ability: Bubble

  Cannon Entrance:
    area_connections:
      Cannon: null
    
    entrances:
      Cannon Shot:
        lose:
          - Jester Boots
        to:
          - Airborne Armada
          - Airborne Armada Lobby Door
  
  Egg Platform:
    area_connections:
      Cannon: null

    locations:
      eggs:
        Cannon: null

